---
/**
 * Blog Editor Login Page
 * LinkedIn OAuth authentication for authorized authors only
 */

export const prerender = false;

// Check if already logged in
const session = Astro.cookies.get('blog_session');
if (session?.value) {
  return Astro.redirect('/blog/editor');
}
---

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Blog Editor Login - Retailaer</title>

  <!-- Google Fonts - Inter -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #0a5c5c 0%, #084a4f 100%);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }

    .login-container {
      background: white;
      border-radius: 16px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      max-width: 440px;
      width: 100%;
      padding: 48px 40px;
      text-align: center;
    }

    .logo {
      margin-bottom: 32px;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 12px;
    }

    .logo-wrapper {
      position: relative;
      display: inline-block;
    }

    .logo-svg {
      width: 80px;
      height: auto;
    }

    .logo-svg path {
      fill: #00BBA4;
    }

    .pencil-badge {
      position: absolute;
      bottom: -8px;
      right: -8px;
      width: 36px;
      height: 36px;
      background: #f5b800;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
      border: 3px solid white;
    }

    .pencil-badge svg {
      width: 18px;
      height: 18px;
      color: white;
    }

    .logo-text {
      font-size: 28px;
      font-weight: 700;
      color: #0a5c5c;
      letter-spacing: -0.5px;
    }

    .logo-subtitle {
      font-size: 14px;
      color: #64748b;
      margin-top: -8px;
      font-weight: 500;
    }

    h1 {
      font-size: 24px;
      font-weight: 600;
      color: #1e293b;
      margin-bottom: 12px;
    }

    .description {
      font-size: 15px;
      color: #64748b;
      line-height: 1.6;
      margin-bottom: 32px;
    }

    .login-button {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      width: 100%;
      padding: 14px 24px;
      background: #0077B5;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
      text-decoration: none;
      box-shadow: 0 4px 12px rgba(0, 119, 181, 0.2);
    }

    .login-button:hover {
      background: #006399;
      transform: translateY(-1px);
      box-shadow: 0 6px 16px rgba(0, 119, 181, 0.3);
    }

    .login-button:active {
      transform: translateY(0);
    }

    .linkedin-icon {
      width: 24px;
      height: 24px;
      flex-shrink: 0;
    }

    .authorized-list {
      margin-top: 32px;
      padding-top: 32px;
      border-top: 1px solid #e2e8f0;
    }

    .authorized-title {
      font-size: 13px;
      font-weight: 600;
      color: #64748b;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 16px;
    }

    .author-badges {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      justify-content: center;
    }

    .author-badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 12px;
      background: #f1f5f9;
      border-radius: 20px;
      font-size: 13px;
      color: #475569;
    }

    .author-badge svg {
      width: 14px;
      height: 14px;
      color: #0077B5;
    }

    .security-note {
      margin-top: 24px;
      padding: 16px;
      background: #f8fafc;
      border-radius: 8px;
      font-size: 13px;
      color: #64748b;
      line-height: 1.5;
    }

    .security-note svg {
      width: 16px;
      height: 16px;
      vertical-align: text-bottom;
      color: #10b981;
      margin-right: 6px;
    }

    @media (max-width: 480px) {
      .login-container {
        padding: 32px 24px;
      }

      .logo-text {
        font-size: 28px;
      }

      h1 {
        font-size: 20px;
      }

      .description {
        font-size: 14px;
      }
    }
  </style>
</head>
<body>
  <div class="login-container">
    <div class="logo">
      <div class="logo-wrapper">
        <svg class="logo-svg" viewBox="0 0 910 944" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M707.5 653.022C766.417 623.554 808.5 581.455 837.958 535.147C867.417 484.629 884.25 425.692 884.25 358.335C884.25 286.768 867.417 223.621 833.75 168.893C800.083 114.165 749.583 72.067 682.25 42.5982C619.125 13.1295 543.375 0.5 455 0.5H0.5V404.643C88.875 404.643 194.083 387.804 299.292 337.286L223.577 309.381C220.75 308.339 217.831 307.524 215.102 306.247C211.851 304.725 207.707 302 206.427 297.654C205.158 293.344 206.394 288.283 209.331 284.882C217.25 275.712 240.375 269.929 240.375 269.929C240.375 269.929 265.625 265.719 290.875 269.929C328.75 274.138 402.292 286.679 402.292 286.679C402.292 286.679 412.155 286.679 423.333 282.469C431.288 278.49 538.143 237.294 549.858 232.78C550.59 232.498 551.26 232.241 552.001 231.982C557.191 230.168 580.18 222.766 609.722 222.766C625.898 222.766 636.113 224.458 642.836 226.724C653.344 230.266 664.732 242.383 659.851 252.34C656.806 258.551 648.085 266.778 627.225 277.643C567.122 308.949 537.017 324.448 522.108 332.051C512.668 336.865 502.708 341.951 497.97 351.43V351.43C494.682 358.01 460.54 432.597 445.777 464.879C441.281 474.709 437.037 484.744 430.608 493.433C425.038 500.962 416.468 510.386 404.2 518.568C400.396 521.105 397.072 522.966 394.155 524.3C379.873 530.826 362.116 534.271 362.116 518.568V518.568C362.116 514.358 362.116 510.149 366.325 476.47C370.533 438.582 379.707 390.743 379.707 390.743C379.707 390.743 21.8758 535.147 4.70833 825.969V943.5H324.542V707.75H408.708L568.625 943.5H909.5L707.5 653.022ZM560.208 476.21C560.208 472 556 467.79 551.792 467.79H543.375V522.518H551.792C556 522.518 560.208 518.308 560.208 514.098C564.417 509.888 564.417 501.469 564.417 493.049C564.417 488.839 560.208 480.42 560.208 476.21Z" fill="#00BBA4"/>
        </svg>
        <div class="pencil-badge">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
            <path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"/>
          </svg>
        </div>
      </div>
      <div class="logo-text">Retailaer</div>
      <div class="logo-subtitle">Blog Editor</div>
    </div>

    <h1>Sign in to continue</h1>
    <p class="description">
      Authorized team members can sign in with LinkedIn to access the blog editor.
    </p>

    <a href="/api/auth/linkedin" class="login-button">
      <svg class="linkedin-icon" viewBox="0 0 24 24" fill="currentColor">
        <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
      </svg>
      Continue with LinkedIn
    </a>

    <div class="authorized-list">
      <div class="authorized-title">Authorized Authors</div>
      <div class="author-badges">
        <div class="author-badge">
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/>
          </svg>
          Ann Cederhall
        </div>
        <div class="author-badge">
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/>
          </svg>
          Anders LÃ¶fgren
        </div>
        <div class="author-badge">
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/>
          </svg>
          Ashley Raiteri
        </div>
      </div>
    </div>

    <div class="security-note">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
        <path d="M9 12l2 2 4-4"/>
      </svg>
      Your LinkedIn credentials are verified by LinkedIn. We never see your password.
    </div>
  </div>
</body>
</html>
